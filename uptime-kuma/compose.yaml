services:
  uptime-kuma:
    container_name: uptime-kuma
    hostname: uptime-kuma
    image: louislam/uptime-kuma:latest
    restart: unless-stopped
    security_opt:
      - no-new-privileges:true
    ports:
      - 3001:3001
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ./uptimekuma:/app/data
    networks:
      - backend
    labels:
      - traefik.enable=true
      - traefik.docker.network=backend
      - traefik.http.routers.kuma.entrypoints=homesec
      - traefik.http.routers.kuma.rule=Host(`kuma.${DOMAIN}`)
      - traefik.http.routers.kuma.middlewares=authelia@docker
      - net.unraid.docker.managed=composeman
      - net.unraid.docker.webui=http://[IP]:[PORT:3001]/files/
      - net.unraid.docker.icon=https://github.com/louislam/uptime-kuma/blob/master/public/icon.png?raw=true
      - net.unraid.docker.shell=bash
networks:
  backend:
    external: true
